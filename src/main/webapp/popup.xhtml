<ui:composition
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">




            <h:outputScript name="js/tinymce/tinymce.min.js" />
            <h:outputScript name="js/upload-image.js" target="head"/>
            <h:outputScript name="js/tinymce/tinymce-images.js" target="head"/>
            <h:outputScript name="js/tinymce/tinymce-configuration.js" target="head"/>
        <script type="text/javascript">

                const options = {
                    language: 'pl',
                    min_height: 100,
                };

                var isPopupView = true;
                const setupFunc = function (editor) {
                    editor.on('init', function () {
                        $(editor.getBody()).on('click', 'a[href]', function (ae) {
                            openLinkInNewTab($(ae.currentTarget).attr('href'));
                        });
                    });



                    editor.on('change', function(event) {
                        dispatchCustomEvent('change', event.target.getElement());
                    });

                    var eventName = isPopupView ? 'popupClose' : 'changeView';
                    document.addEventListener(eventName, function (e) {
                        tinyMCE.remove('#' + editor.id.replace(/:/g, '\\:'));
                        document.removeEventListener(eventName, arguments.callee);
                    });
                }
         </script>
            <p:inputTextarea

                             styleClass="rich-text-editor" />
            <h:outputScript name="js/tinymce-helpers.js"/>
</ui:composition>